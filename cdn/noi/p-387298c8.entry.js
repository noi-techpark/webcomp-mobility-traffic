import{r as t,c as e,h as i,H as n,g as o,a,f as r,d as s}from"./p-cdb96f25.js";import{n as l,N as c,g as d,c as h,a as p,l as f,t as u,b as g,f as m,d as b,e as v}from"./p-d2f8bff6.js";const w=class{constructor(i){t(this,i),this.noiBackdropTap=e(this,"noiBackdropTap",7),this.overlayIndex=1,this.visible=!0,this.tappable=!0,this.stopPropagation=!0}onMouseDown(t){this.emitTap(t)}emitTap(t){this.stopPropagation&&(t.preventDefault(),t.stopPropagation()),this.tappable&&this.noiBackdropTap.emit()}render(){return i(n,{tabindex:"-1",class:{"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable},style:{zIndex:""+(this.visible?this.overlayIndex:-1)}})}};w.style=".sc-noi-backdrop-h{display:block;position:absolute;top:0;left:0;right:0;bottom:0;transform:translateZ(0);contain:strict;cursor:pointer;touch-action:none;background-color:var(--background, #1b2b34);transition:opacity 0.5s ease-in-out;opacity:var(--opacity, 0.5);will-change:opacity}.backdrop-hide.sc-noi-backdrop-h{opacity:.1}.backdrop-no-tappable.sc-noi-backdrop-h{cursor:auto}";const y=t=>t.timeStamp||Date.now(),x=(t,e=0)=>{let i;return(...n)=>{clearTimeout(i),i=setTimeout(t,e,...n)}},k=class{constructor(i){t(this,i),this.noiFocus=e(this,"noiFocus",7),this.noiBlur=e(this,"noiBlur",7),this.inItem=!1,this.disabled=!1,this.strong=!1,this.type="button",this.handleClick=t=>{if("button"===this.type&&this.href)window.location.href=this.href;else if((e=this.el).shadowRoot&&e.attachShadow){const e=this.el.closest("form");if(e){t.preventDefault();const i=document.createElement("button");i.type=this.type,i.style.display="none",e.appendChild(i),i.click(),i.remove()}}else var e},this.onFocus=()=>{this.noiFocus.emit()},this.onBlur=()=>{this.noiBlur.emit()}}componentWillLoad(){this.inItem=!!this.el.closest("noi-item")||!!this.el.closest("noi-item-divider")}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}render(){const{type:t,disabled:e,rel:o,target:a,size:r,href:s,expand:l,hasIconOnly:c,shape:d,strong:h}=this,p=void 0===r&&this.inItem?"small":r,f=void 0===s?"button":"a";let u=this.fill;return void 0===u&&(u="solid"),i(n,{onClick:this.handleClick,"aria-disabled":e?"true":null,class:{button:!0,["button-"+l]:void 0!==l,["button-"+p]:void 0!==p,["button-"+d]:void 0!==d,["button-"+u]:!0,"button-strong":h,"button-has-icon-only":c,"button-disabled":e,"noi-activatable":!0,"noi-focusable":!0}},i(f,Object.assign({},"button"===f?{type:t}:{download:this.download,href:s,rel:o,target:a},{class:"noi-button__native",part:"native",disabled:e,onFocus:this.onFocus,onBlur:this.onBlur}),i("span",{class:"noi-button__inner"},i("slot",{name:"icon-only"}),i("slot",{name:"start"}),i("slot",null),i("slot",{name:"end"}))))}get el(){return o(this)}};k.style=':host(.button-md){--border-radius:4px;--padding-top:0;--padding-bottom:0;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 100ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;margin-left:2px;margin-right:2px;margin-top:4px;margin-bottom:4px;height:36px;font-size:14px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host(.button-md){margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}:host(.button-md.button-solid){--background-activated:transparent;--background-hover:#333;--background-focused:#333;--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, .2), 0 2px 2px 0 rgba(0, 0, 0, .14), 0 1px 5px 0 rgba(0, 0, 0, .12)}:host(.button-md.button-solid.noi-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, .2), 0 8px 10px 1px rgba(0, 0, 0, .14), 0 3px 14px 2px rgba(0, 0, 0, .12)}:host(.button-md.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:#999;--background-hover:#999;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-md.button-outline.noi-activated) .noi-button__native{background:transparent}:host(.button-md.button-clear){--background-activated:transparent;--background-focused:#999;--background-hover:#999;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-md.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-md.button-large){--padding-top:0;--padding-start:0;--padding-end:1em;--padding-bottom:0;height:2.8em;font-size:20px}:host(.button-md.button-small){--padding-top:0;--padding-start:.9em;--padding-end:.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-md.button-strong){font-weight:bold}:host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--noi-font-family, var(--noi-font-family-default));text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;pointer-events:auto;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}::slotted(*) .button-has-icon-only.button-clear{--padding-top:12px;--padding-end:12px;--padding-bottom:12px;--padding-start:12px;margin:0;width:48px;height:48px;--background:transparent}::slotted(svg[slot=start]){position:absolute;left:var(--padding-start, 1.1em)}::slotted(svg[slot=end]){position:absolute;right:var(--padding-end, 1.1em)}::slotted(svg[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid){--background:#fff;--color:#333}:host(.button-outline){--border-color:#333;--background:transparent;--color:#333}:host(.button-clear){--border-width:0;--background:transparent;--color:#333}:host(.button-block){display:block}:host(.button-block) .noi-button__native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .noi-button__native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .noi-button__native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .noi-button__native{border-radius:0;border-right-width:0;border-left-width:0}.noi-button__native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;box-sizing:border-box;appearance:none}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.noi-button__native{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.noi-button__native::-moz-focus-inner{border:0}.noi-button__inner{display:flex;position:relative;flex-flow:row nowrap;flex-shrink:0;align-items:center;justify-content:center;width:100%;height:100%;z-index:1}.noi-button__native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.noi-activated){color:var(--color-activated)}:host(.noi-activated) .noi-button__native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.noi-focused){color:var(--color-focused)}:host(.noi-focused) .noi-button__native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .noi-button__native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}';const _=class{constructor(i){t(this,i),this.noiInput=e(this,"noiInput",7),this.noiChange=e(this,"noiChange",7),this.noiBlur=e(this,"noiBlur",7),this.noiFocus=e(this,"noiFocus",7),this.noiStyle=e(this,"noiStyle",7),this.inputId="noi-input-"+z++,this.fireFocusEvents=!0,this.hasFocus=!1,this.autofocus=!1,this.clearInput=!1,this.debounce=0,this.disabled=!1,this.name=this.inputId,this.readonly=!1,this.required=!1,this.type="text",this.value="",this.onInput=t=>{const e=t.target;e&&(this.value=e.value||""),this.noiInput.emit(t)},this.onBlur=t=>{this.hasFocus=!1,this.emitStyle(),this.fireFocusEvents&&this.noiBlur.emit(t)},this.onFocus=t=>{this.hasFocus=!0,this.emitStyle(),this.fireFocusEvents&&this.noiFocus.emit(t)},this.clearTextOnEnter=t=>{"Enter"===t.key&&this.clearTextInput(t)},this.clearTextInput=t=>{this.clearInput&&!this.readonly&&!this.disabled&&t&&(t.preventDefault(),t.stopPropagation(),this.setFocus()),this.value="",this.nativeInput&&(this.nativeInput.value="")}}debounceChanged(){this.noiChange=((t,e)=>{const i=t._original||t;return{_original:t,emit:x(i.emit.bind(i),e)}})(this.noiChange,this.debounce)}disabledChanged(){this.emitStyle()}valueChanged(){var t;this.emitStyle(),this.noiChange.emit(null===(t=this.value)?{value:null}:void 0===t?{value:void 0}:"number"==typeof t?{value:t+""}:{value:t.toString()})}componentWillLoad(){if(this.el.hasAttribute("tabindex")){const t=this.el.getAttribute("tabindex");this.tabindex=null!==t?t:void 0,this.el.removeAttribute("tabindex")}}connectedCallback(){this.emitStyle(),this.debounceChanged(),document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}disconnectedCallback(){document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el}))}async setFocus(){this.nativeInput&&this.nativeInput.focus()}async setBlur(){this.nativeInput&&this.nativeInput.blur()}getInputElement(){return Promise.resolve(this.nativeInput)}getValue(){return"number"==typeof this.value?this.value.toString():(this.value||"").toString()}emitStyle(){this.noiStyle.emit({interactive:!0,input:!0,"has-placeholder":null!=this.placeholder,"has-value":this.hasValue(),"has-focus":this.hasFocus,"interactive-disabled":this.disabled})}hasValue(){return this.getValue().length>0}render(){const t=this.getValue(),e=this.inputId+"-lbl",o=(()=>{const t=this.el.closest("noi-item");return t?t.querySelector("noi-label"):null})();o&&(o.id=e);const a={"has-value":this.hasValue(),"has-focus":this.hasFocus};return i(n,{"aria-disabled":this.disabled?"true":null,class:a},i("input",{class:"noi-input__native",ref:t=>this.nativeInput=t,"aria-labelledby":e,disabled:this.disabled,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,step:this.step,size:this.size,tabindex:this.tabindex,type:this.type,value:t,onInput:this.onInput,onBlur:this.onBlur,onFocus:this.onFocus}),this.clearInput&&!this.readonly&&!this.disabled&&i("button",{"aria-label":"reset",type:"button",class:"input-clear-icon",onTouchStart:this.clearTextInput,onMouseDown:this.clearTextInput,onKeyDown:this.clearTextOnEnter}))}get el(){return o(this)}static get watchers(){return{debounce:["debounceChanged"],disabled:["disabledChanged"],value:["valueChanged"]}}};let z=0;_.style=".sc-noi-input-h{--clear-icon-bg-size:22px;--clear-icon-width:30px;--clear-icon-height:30px;--clear-icon-svg:\"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><polygon fill='#eee' points='405,136.798 375.202,107 256,226.202 136.798,107 107,136.798 226.202,256 107,375.202 136.798,405 256,285.798 375.202,405 405,375.202 285.798,256'/></svg>\";--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:.5;--padding-top:10px;--padding-end:0;--padding-bottom:10px;--padding-start:calc(var(--noi-item-padding-start, 16px) / 2);--background:transparent;--color:initial;font-size:inherit;display:flex;position:relative;flex:1;align-items:center;width:100%;padding:0 !important;background:var(--background);border-radius:var(--border-radius, 0);color:var(--color);font-family:var(--noi-font-family, var(--noi-font-family-default));z-index:2}noi-item.sc-noi-input-h:not(.item-label),noi-item:not(.item-label) .sc-noi-input-h{--padding-start:0}.noi-input__native.sc-noi-input{padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;box-sizing:border-box;appearance:none}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.noi-input__native.sc-noi-input{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.noi-input__native.sc-noi-input::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.noi-input__native.sc-noi-input:-webkit-autofill{background-color:transparent}.noi-input__native.sc-noi-input:invalid{box-shadow:none}.noi-input__native.sc-noi-input::-ms-clear{display:none}.native-input[disabled].sc-noi-input{opacity:0.4}.cloned-input.sc-noi-input{left:0;top:0;position:absolute;pointer-events:none}.input-clear-icon.sc-noi-input{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;visibility:hidden;appearance:none}.input-clear-icon.sc-noi-input:focus{opacity:0.5}.has-value.sc-noi-input-h .input-clear-icon.sc-noi-input{visibility:visible}.has-focus.sc-noi-input-h{pointer-events:none}.has-focus.sc-noi-input-h input.sc-noi-input,.has-focus.sc-noi-input-h a.sc-noi-input,.has-focus.sc-noi-input-h button.sc-noi-input{pointer-events:auto}.item-label-stacked.sc-noi-input-h,.item-label-stacked .sc-noi-input-h,.item-label-floating.sc-noi-input-h,.item-label-floating .sc-noi-input-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0}.input-clear-icon.sc-noi-input{background-image:url(\"data:image/svg+xml;charset=utf-8,url-encode(var(--clear-icon-svg))\");width:var(--clear-icon-width);height:var(--clear-icon-height);background-size:var(--clear-icon-bg-size)}";const M=t=>!("isConnected"in t)||t.isConnected,S=(()=>{let t;return(...e)=>{t&&clearTimeout(t),t=setTimeout(()=>{t=0,(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(M))})(...e)},2e3)}})(),C=(t,e)=>{const i=((t,e=((t,e)=>t!==e))=>{let i=new Map(Object.entries(null!=t?t:{}));const n={dispose:[],get:[],set:[],reset:[]},o=()=>{i=new Map(Object.entries(null!=t?t:{})),n.reset.forEach(t=>t())},a=t=>(n.get.forEach(e=>e(t)),i.get(t)),r=(t,o)=>{const a=i.get(t);e(o,a,t)&&(i.set(t,o),n.set.forEach(e=>e(t,o,a)))},s="undefined"==typeof Proxy?{}:new Proxy(t,{get:(t,e)=>a(e),ownKeys:()=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,e)=>i.has(e),set:(t,e,i)=>(r(e,i),!0)}),l=(t,e)=>(n[t].push(e),()=>{((t,e)=>{const i=t.indexOf(e);i>=0&&(t[i]=t[t.length-1],t.length--)})(n[t],e)});return{state:s,get:a,set:r,on:l,onChange:(e,i)=>{const n=l("set",(t,n)=>{t===e&&i(n)}),o=l("reset",()=>i(t[e]));return()=>{n(),o()}},use:(...t)=>t.forEach(t=>{t.set&&l("set",t.set),t.get&&l("get",t.get),t.reset&&l("reset",t.reset)}),dispose:()=>{n.dispose.forEach(t=>t()),o()},reset:o}})(t,e);return(({on:t})=>{const e=new Map;"function"==typeof a&&(t("dispose",()=>{e.clear()}),t("get",t=>{const i=a();i&&((t,e,i)=>{const n=t.get(e);n?n.includes(i)||n.push(i):t.set(e,[i])})(e,t,i)}),t("set",t=>{const i=e.get(t);i&&e.set(t,i.filter(r)),S(e)}),t("reset",()=>{e.forEach(t=>t.forEach(r)),S(e)}))})(i),i};class T{constructor(){this.token=null,this.getValidAccessToken=l(async()=>{if(!T.isAuthTokenExpired(this.token))return this.token.accessToken;if(!T.isRefreshTokenExpired(this.token)){const t=await T.refresh(this.token.refreshToken);return this.token=t,t.accessToken}const t=await T.login();return this.token=t,t.accessToken})}static encodeFormData(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}static parseToken(t){const e=new Date,i=new Date(e.getTime()+1e3*t.expires_in),n=new Date(e.getTime()+1e3*t.refresh_expires_in);return{accessToken:t.access_token,expiryDate:i,refreshToken:t.refresh_token,refreshExpiryDate:n}}getToken(){return this.token}static isAuthTokenExpired(t){return!t||!t.accessToken||t.expiryDate>=new Date}static isRefreshTokenExpired(t){return!t||!t.refreshToken||t.refreshExpiryDate>=new Date}static async refresh(t){try{const e={grant_type:"refresh_token",client_id:process.env.CLIENT_ID,refresh_token:t},i=await fetch(process.env.TOKEN_URL,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:T.encodeFormData(e)});if(!i.ok)throw new c("error.auth-service.unknown");const n=await i.json();return T.parseToken(n)}catch(t){if(t instanceof c)throw t;throw new c("error.auth-service.offline")}}static async login(){try{const t={grant_type:"client_credentials",client_id:process.env.CLIENT_ID,client_secret:process.env.CLIENT_SECRET},e=await fetch(process.env.TOKEN_URL,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:T.encodeFormData(t)});if(!e.ok)throw new c("error.auth-service.unknown");const i=await e.json();return T.parseToken(i)}catch(t){if(t instanceof c)throw t;throw new c("error.auth-service.offline")}}}const j=new T;function O(t,e){return t&&t.length?t.reduce((t,i)=>(e[i]&&e[i].geometry&&(t[i]=e[i]),t),{}):{}}function A(t){if(!t)return null;if(!Array.isArray(t))throw new c("error.urban-segments-validation");return t.forEach(t=>{if("string"!=typeof t)throw new c("error.urban-segments-validation")}),t}function E(){return new c("error.noi-service.offline")}function D(t,e,i){if(!t||!t[e]||!Array.isArray(t[e])||2!==t[e].length||void 0===i)return;const n=t[e];return i>n[1]?"":i>n[0]?"light":"strong"}function I(t,e){if("BluetoothStation"!==e[t+"type"])return null;if(!e[t+"coordinate"]||!e[t+"coordinate"].y)return null;const i={lat:e[t+"coordinate"].y,long:e[t+"coordinate"].x};return i?{id:e[t+"code"],name:e[t+"name"],coordinates:i,type:"BluetoothStation"}:null}function $(t){return e=>{const i=I("sb",e),n=I("se",e),o={type:"LinkStation",id:e.ecode,name:e.ename,origin:e.eorigin,geometry:e.egeometry,start:i,end:n};return t&&t.calcGeometryDistance&&e.egeometry&&(o.distance=function(t){if("LineString"===t.type)return t.coordinates.reduce((t,e)=>(null!==t.prev&&(t.distance+=d(t.prev,e)),t.prev=e,t),{prev:null,distance:0}).distance}(e.egeometry)),o}}class L{constructor(){this.jams=void 0,this.timeThresholds=void 0,this.urbanSegments=void 0,this.geometries=void 0}async request(t,e={}){try{const i=await fetch(t,e);if(!i.ok)throw new c("error.noi-service.unknown");return await i.json()}catch(t){if(t instanceof c)throw t;throw E()}}async fetchJamThresholds(){try{if(this.jams)return this.jams;const t=await fetch(s("./jams.json"));if(!t.ok)throw new c("error.jams-not-available");const e=await t.json()||{};return this.jams=e,e}catch(t){if(t instanceof c)throw t;throw E()}}async fetchTimeThresholds(){try{if(this.timeThresholds)return this.timeThresholds;const t=await fetch(s("./time-thresholds.json"));if(!t.ok)throw new c("error.time-thresholds-not-available");const e=await t.json()||{};return this.timeThresholds=e,e}catch(t){if(t instanceof c)throw t;throw E()}}async getLinkStationsTime(t,e=!1){const i=`scode.in.(${t.join(",")})`,n=e?await j.getValidAccessToken():null,o=n?{Authorization:"bearer "+n}:{},a=await this.request(`${L.BASE_URL}/${L.VERSION}/flat,node/LinkStation/tempo/latest?limit=-1&select=scode,sdatatypes.tempo&where=${i}&distinct=true`+L.ORIGIN,{headers:o});if(!a||!a.data)throw new c("error.link-station.not-found",{message:`LinkStation ${name} not found`});return a.data.map(t=>({timeSec:t.mvalue,id:t.scode,sync:new Date(t.mvalidtime)}))}async getLinkStationsHistoryTime(t,e=!1){const i=new Date;i.setDate(i.getDate()-1),i.setHours(0,0,0);const n=i.toISOString(),o=new Date;i.setHours(23,59,59);const a=o.toISOString(),r=`scode.in.(${t.join(",")})`,s=e?await j.getValidAccessToken():null,l=s?{Authorization:"bearer "+s}:{},d=await this.request(`${L.BASE_URL}/${L.VERSION}/flat,node/LinkStation/tempo/${n}/${a}?limit=-1&select=scode,sdatatypes.tempo&where=${r}&distinct=true`+L.ORIGIN,{headers:l});if(!d||!d.data)throw new c("error.link-station.not-found",{message:`LinkStation ${name} not found`});const h=d.data.reduce((t,e)=>(t[e.scode]=t[e.scode]||[],t[e.scode].push({timeSec:e.mvalue,id:e.scode,sync:new Date(e.mvalidtime)}),t),{});return Object.keys(h).reduce((t,e)=>(t[e]=h[e].length>1?h[e][h[e].length-2]:h[e][h[e].length-1],t),{})}async getLinkStationsVelocity(t,e=!1){const i=`scode.in.(${t.join(",")}),mperiod.eq.3600`,n=e?await j.getValidAccessToken():null,o=n?{Authorization:"bearer "+n}:{},a=await this.request(`${L.BASE_URL}/${L.VERSION}/flat,node/LinkStation/velocita'/latest?limit=-1&select=mvalue,scode,mvalidtime&where=${i}&distinct=true`+L.ORIGIN,{headers:o});if(!a||!a.data)throw new c("error.link-station.not-found",{message:`LinkStation ${name} not found`});if(a.data.length!==t.length)throw new c("error.link-station-velocity.not-found",{message:`Some of LinkStation ids=${t.join(",")} are not found`});return a.data.map(t=>({velocityKmH:t.mvalue,id:t.scode,syncDate:t.mvalidtime?new Date(t.mvalidtime):void 0}))}async getUrbanSegmentsIds(t,e){if(this.urbanSegments)return A(this.urbanSegments[`${t}->${e}`]);try{const i=await fetch(s("./urban-segments.json"));if(i.ok){const n=await i.json()||{};return this.urbanSegments=n,A(n[`${t}->${e}`])}throw new c("error.urban-segments")}catch(t){if(t instanceof c)throw t;throw new c("error.urban-segments")}}async getPathGeometries(t){if(this.geometries)return O(t,this.geometries);try{return await this.fetchGeometries(),await this.fetchFallbackGeometries(),O(t,this.geometries)}catch(t){if(t instanceof c)throw t;throw new c("error.geometries")}}async fetchGeometries(){try{const t="egeometry.neq.null,eactive.eq.true",e=await this.request(`${L.BASE_URL}/${L.VERSION}/flat,edge/LinkStation?where=${t}&limit=-1`+L.ORIGIN,{});if(!e||!e.data||!Array.isArray(e.data))throw new c("error.noi-service.data-format",{message:"LinkStations expecting an array response"});this.geometries=e.data.map($({calcGeometryDistance:!0})).reduce((t,e)=>(t[e.id]=e,t),{})}catch(t){if(t instanceof c)throw t;throw new c("error.geometries")}}async fetchFallbackGeometries(){try{const t=await fetch(s("./geometries.json"));if(!t.ok)throw new c("error.geometries");const e=await t.json()||{};this.geometries=this.geometries||{},Object.keys(e).forEach(t=>{this.geometries[t]||(this.geometries[t]=e[t])})}catch(t){if(t instanceof c)throw t;throw new c("error.geometries")}}async getLinkStationsByIds(t,e){const i=`egeometry.neq.null,eactive.eq.true,ecode.in.(${t.join(",")})`,n=e&&e.auth?await j.getValidAccessToken():null,o=n?{Authorization:"bearer "+n}:{},a=await this.request(`${L.BASE_URL}/${L.VERSION}/flat,edge/LinkStation?where=${i}&limit=-1`+L.ORIGIN,{headers:o});if(!a||!a.data||!Array.isArray(a.data))throw new c("error.noi-service.data-format",{message:"LinkStations expecting an array response"});if(a.data.length!==t.length)throw new c("error.link-station-path.not-found",{message:`Some of LinkStation ids=${t.join(",")} are not found`});const r=a.data.map($(e)).reduce((t,e)=>(t[e.id]=e,t),{});return t.map(t=>r[t])}async getHighwayStations(){const t=await this.request(`${L.BASE_URL}/${L.VERSION}/flat/LinkStation?where=sorigin.eq.A22,sactive.eq.true&limit=-1`+L.ORIGIN);if(!t||!t.data||!Array.isArray(t.data))throw new c("error.noi-service.data-format",{message:"HighwayStations expecting an array response"});return function(t){const e=t.reduce((t,e)=>{if(!(e&&"string"==typeof e.scode&&"string"==typeof e.sname&&e.smetadata&&e.smetadata.latitudineinizio&&e.smetadata.longitudininizio&&e.smetadata.latitudinefine&&e.smetadata.longitudinefine))return t;const i=e.scode.split("-");if(2!==i.length)return t;const n=e.sname.split(" - ");if(2!==n.length)return t;const o=[{lat:e.smetadata.latitudineinizio,long:e.smetadata.longitudininizio},{lat:e.smetadata.latitudinefine,long:e.smetadata.longitudinefine}],a=[+e.smetadata.metroinizio,+e.smetadata.metrofine];return t[i[0]]||(t[i[0]]={id:i[0],name:n[0],coordinates:o[0],highway:"A22",position:a[0]}),t[i[1]]||(t[i[1]]={id:i[1],name:n[1],coordinates:o[1],highway:"A22",position:a[1]}),t},{});return Object.keys(e).map(t=>e[t]).filter(t=>!t.id.startsWith("1111"))}(t.data)}}L.BASE_URL="https://mobility.api.opendatahub.bz.it",L.VERSION="v2",L.ORIGIN="&origin=webcomp-mobility-traffic";const N=new L,H=C({segments:void 0,path:void 0,pathError:void 0,loading:!1,errorCode:void 0,syncDate:void 0,durationMin:void 0,segmentsTime:void 0,segmentsVelocity:void 0}),{onChange:P,set:B,state:Y}=H;let R=void 0,q=void 0;async function F(){try{return await N.fetchJamThresholds()}catch(t){return}}P("segments",t=>{var e;t&&t.length&&(e=t,B("loading",!0),B("errorCode",void 0),B("durationMin",void 0),B("segmentsTime",void 0),B("segmentsVelocity",void 0),B("syncDate",void 0),B("path",void 0),B("pathError",void 0),R&&R.cancel(),q&&q.cancel(),q=h(async function(t,e){const i=t.map(t=>t.id),n=await N.getPathGeometries(i),o=await F();return i.reduce((t,i)=>{if(!n[i])return t;const a=D(o,i,e?e[i]:void 0);return t.push({type:"LinkStation",id:i,name:n[i].name,origin:"A22",start:null,end:null,geometry:n[i].geometry,jamLevel:a}),t},[])}(e,Y.segmentsVelocity)),q.promise.then(t=>{t?(B("path",t),e.length!==t.length&&B("pathError","error.highway-path.incomplete")):B("pathError","error.highway-path")}).catch(t=>{B("pathError",t instanceof c?t.code:"error.highway-path")}),R=h(async function(t){const e=t.map(t=>t.id);let i=await N.getLinkStationsTime(e,!0);try{const t=await N.fetchTimeThresholds(),n=await N.getLinkStationsHistoryTime(e,!0);i.forEach(e=>{let i=t&&t[e.id.replace("-","->")];i&&n[e.id]&&n[e.id].timeSec+i<e.timeSec&&(e.sync=n[e.id].sync,e.timeSec=n[e.id].timeSec)})}catch(t){}const n=t.reduce((t,e)=>(t[e.id]=e.length,t),{});return{segmentsVelocity:i.reduce((t,e)=>(t[e.id]=Math.round(n[e.id]/1e3/(e.timeSec/3600)),t),{}),segmentsTime:i.reduce((t,e)=>(t[e.id]=e.timeSec,t),{}),syncDate:i.reduce((t,e)=>e.sync&&e.sync<t?e.sync:t,new Date),timeMin:Math.round(i.reduce((t,e)=>t+e.timeSec,0)/60)}}(e)),R.promise.then(t=>{B("loading",!1),R=void 0,void 0!==t&&(B("durationMin",t.timeMin),B("syncDate",t.syncDate),B("segmentsTime",t.segmentsTime),B("segmentsVelocity",t.segmentsVelocity))}).catch(t=>{t.isCancelled||(R=void 0,B("loading",!1),B("errorCode",t instanceof c?t.code:"error.highway-time"))}))}),P("segmentsVelocity",t=>{t&&Y.path&&Y.path.length&&F().then(e=>{const i=Y.path.map(i=>{const n=i.id.replace("-","->");return Object.assign(Object.assign({},i),{jamLevel:D(e,n,t[i.id])})});B("path",i)}).catch(()=>{console.error("Error loading traffic jams info")})});const V=Y,G=C({startEnd:void 0,selectedId:void 0,path:void 0,loading:!1,errorCode:void 0,stations:void 0,durationMin:void 0,distance:void 0,syncDate:void 0}),{onChange:U,set:W,state:X}=G;let J=void 0;U("path",t=>{if(!t||!t.length)return void W("stations",void 0);const e=t.reduce((t,e)=>(t.push({position:t[t.length-1].position+e.distance,id:e.end.id,name:e.end.name,coordinates:e.end.coordinates,timeSec:e.timeSec}),t),[{timeSec:0,position:0,name:t[0].start.name,id:t[0].start.id,coordinates:t[0].start.coordinates}]);W("stations",e)}),U("stations",t=>{W("distance",Math.round(t&&t.length?t[t.length-1].position:void 0))}),U("startEnd",t=>{W("path",void 0),W("durationMin",void 0),W("errorCode",void 0),t&&function(t,e){W("loading",!0),W("errorCode",void 0),J&&J.cancel(),J=h(async function(t,e){const i=await N.getUrbanSegmentsIds(t,e),n=await async function(){try{return await N.fetchJamThresholds()}catch(t){return}}();if(!i)return;const o=await N.getLinkStationsByIds(i,{calcGeometryDistance:!0}),a=await N.getLinkStationsVelocity(o.map(t=>t.id)),r=a.reduce((t,e)=>(t[e.id]=e.velocityKmH,t),{}),s=o.reduce((t,e)=>t+Math.round(e.distance/(1e3*r[e.id])*60),0),l=o.map(t=>{const e=D(n,t.id,r[t.id]),i=Math.round(t.distance/(1e3*r[t.id])*60*60);return Object.assign(Object.assign({},t),{jamLevel:e,timeSec:i})}),c=Math.min(...a.filter(Boolean).map(t=>t.syncDate.getTime()));return{path:l,timeMin:s,syncDate:c?new Date(c):void 0}}(t,e)),J.promise.then(t=>{W("loading",!1),J=void 0,void 0!==t&&(W("path",t.path),W("durationMin",t.timeMin),W("syncDate",t.syncDate))}).catch(t=>{t.isCancelled||(J=void 0,W("loading",!1),W("errorCode",t instanceof c?t.code:p))})}(...t)});const K=X,{state:Z,onChange:Q,set:tt}=C({mapPopup:!1,activePath:"highway",selecting:null,selectedId:"",startId:"",endId:"",stations:void 0,start:null,end:null,selected:null,stationsList:null,loading:!0,mapCenter:{lat:46.4983,long:11.3548}});function et(){return Z.stations?Z.stationsList.map(t=>Object.assign(Object.assign({},t),{selected:t.id===Z.selectedId,isStart:t.id===Z.startId,isEnd:t.id===Z.endId})):null}function it(){if(!Z.stations||!Z.startId||!Z.endId)return null;const t=Z.start.position,e=Z.end.position;return Z.stationsList.reduce((i,n)=>(t<e&&n.position<=e&&n.position>=t&&i.push(Object.assign({},n)),t>e&&n.position>=e&&n.position<=t&&i.push(Object.assign({},n)),i),[]).map(t=>Object.assign(Object.assign({},t),{selected:t.id===Z.selectedId,isStart:t.id===Z.startId,isEnd:t.id===Z.endId})).sort((i,n)=>t<e&&i.position>n.position||t>e&&i.position<n.position?1:-1)}function nt(){if(!Z.stations||!Z.startId||!Z.endId)return;const t=Z.start.position;return it().reduce((e,i)=>(e.lastId&&e.data.push({id:`${e.lastId}-${i.id}`,length:Math.abs(t-i.position)}),e.lastId=i.id,e),{data:[],lastId:""}).data}function ot(){return!!Z.startId&&!!Z.endId}Q("stations",t=>{if(!t)return V.segments=void 0,tt("stationsList",null),void tt("loading",!0);var e;tt("loading",!1),tt("stationsList",(e=t,Object.keys(e).map(t=>e[t]).sort((t,e)=>t.position>e.position?1:-1))),Z.startId&&Z.endId&&(V.segments=nt())}),Q("selectedId",t=>{t?tt("selected",Z.stations[t]):(tt("selected",null),tt("mapPopup",!1))}),Q("selected",t=>{t&&tt("mapCenter",Object.assign({},t.coordinates))}),Q("startId",t=>{if(Z.selecting=null,!t)return tt("start",null),void(V.segments=void 0);tt("start",Z.stations[t]),Z.endId===t?tt("endId",null):Z.endId&&(V.segments=nt(),K.startEnd=[t,Z.endId])}),Q("endId",t=>{if(Z.selecting=null,!t)return tt("end",null),void(V.segments=void 0);tt("end",Z.stations[t]),Z.startId===t?tt("startId",null):Z.startId&&(V.segments=nt(),K.startEnd=[Z.startId,t])});const at={path:"m7.773438.53125c3.988281 0 7.222656 3.101562 7.222656 6.929688 0 5.390624-7.222656 10.007812-7.222656 10.007812s-7.222657-4.617188-7.222657-10.007812c0-3.828126 3.234375-6.929688 7.222657-6.929688zm0 4.617188c-1.328126 0-2.40625 1.035156-2.40625 2.3125 0 1.273437 1.078124 2.308593 2.40625 2.308593 1.332031 0 2.410156-1.035156 2.410156-2.308593 0-1.277344-1.078125-2.3125-2.410156-2.3125zm0 0",iconSize:[18,16],shadowSize:[18,16]};class rt extends f.Icon{constructor(t){super(t),f.Util.setOptions(this,at),f.Util.setOptions(this,t)}createIcon(t){const e=t&&"DIV"===t.tagName?t:document.createElement("div");e.innerHTML=`<svg\n      width="${this.options.iconSize[0]}"\n      height="${this.options.iconSize[1]}px"\n      viewBox="0 0 ${this.options.iconSize[1]} ${this.options.iconSize[0]}"\n      version="1.1"\n      xmlns="http://www.w3.org/2000/svg"\n      xmlns:xlink="http://www.w3.org/1999/xlink">\n        <path d="${this.options.path}"></path>\n    </svg>`,e.className=this.options.className;const i=new f.Point(this.options.iconSize[0],this.options.iconSize[1]),n=this.options.iconAnchor?new f.Point(this.options.iconAnchor[0],this.options.iconAnchor[1]):i.divideBy(2);return this.setPosition(e,i,n),e}createShadow(){const t=document.createElement("div");t.className=this.options.className;const e=new f.Point(this.options.shadowSize[0],this.options.shadowSize[1]),i=this.options.shadowAnchor?new f.Point(this.options.shadowAnchor[0],this.options.shadowAnchor[1]):e.divideBy(2);return this.setPosition(t,e,i),t}setPosition(t,e,i){i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),e&&(t.style.width=e.x+"px",t.style.height=e.y+"px")}}const st=t=>i("noi-map-entity",{key:t.id,"entity-type":"MAP_ENTITY_MARKER","entity-id":t.id,lat:t.coordinates.lat,long:t.coordinates.long,class:{"noi-marker":!0,"noi-marker--selected":t.selected,"noi-marker--start":t.isStart,"noi-marker--end":t.isEnd},style:{display:"none"}},t.id,"-",t.name);function lt(t){t.target.getElement().classList.add("noi-marker--hover")}function ct(t){t.target.getElement().classList.remove("noi-marker--hover")}const dt=t=>i("noi-map-entity",{key:t.id,"entity-type":"MAP_ENTITY_HIGHWAY_STATION","entity-id":t.id,lat:t.coordinates.lat,long:t.coordinates.long,class:{"noi-highway-station":!0,"noi-highway-station--selected":t.selected,"noi-highway-station--start":t.isStart,"noi-highway-station--end":t.isEnd},style:{display:"none"}},t.id,"-",t.name);function ht(t){const e=t.target;e.getElement().classList.add("noi-highway-station--hover"),f.Browser.ie||f.Browser.opera||f.Browser.edge||e.bringToFront()}function pt(t){t.target.getElement().classList.remove("noi-highway-station--hover")}const ft=t=>i("noi-map-entity",{key:t.id,"entity-type":"MAP_ENTITY_URBAN_STATION","entity-id":t.id,lat:t.coordinates.lat,long:t.coordinates.long,class:{"noi-urban-station":!0,"noi-urban-station--selected":t.selected},style:{display:"none"}},t.id,"-",t.name);class ut{constructor(t){this.map=t}createLayer(t){const e=t.getAttribute("entity-type");return"MAP_ENTITY_HIGHWAY_STATION"===e?this.createHighwayStation(t):"MAP_ENTITY_URBAN_STATION"===e?this.createUrbanStation(t):"MAP_ENTITY_MARKER"===e?this.createMarker(t):void 0}createHighwayStation(t){const e=t.getAttribute("entity-id"),i=function(t){const e=+t.getAttribute("lat"),i=+t.getAttribute("long"),n={radius:12,fill:!0,fillRule:"nonzero",className:t.getAttribute("class"),bubblingMouseEvents:!1};return new f.CircleMarker([e,i],n)}(t);return i.canSelect=!0,i.on({mouseover:ht,mouseout:pt,click:t=>{const i=t.target.getLatLng();this.map.panTo(i),Z.selectedId=e,Z.mapPopup=!0}}),i}createUrbanStation(t){const e=t.getAttribute("entity-id"),i=function(t){const e=+t.getAttribute("lat"),i=+t.getAttribute("long"),n={radius:8,fill:!0,fillRule:"nonzero",className:t.getAttribute("class"),bubblingMouseEvents:!1};return new f.CircleMarker([e,i],n)}(t);return i.canSelect=!1,i.on({mouseover:ht,mouseout:pt,click:t=>{const i=t.target.getLatLng();this.map.panTo(i),K.selectedId=e,Z.mapPopup=!0}}),i}createMarker(t){const e=t.getAttribute("entity-id"),i=function(t){const e=+t.getAttribute("lat"),i=+t.getAttribute("long"),n=new rt({className:t.getAttribute("class")});return new f.Marker([e,i],{icon:n})}(t);return i.canSelect=!0,i.on({mouseover:lt,mouseout:ct,click:t=>{const i=t.target.getLatLng();this.map.panTo(i),Z.selectedId=e,Z.mapPopup=!0}}),i}}function gt(t){return null==t||isNaN(t)}const mt=class{constructor(e){t(this,e),this.map=null,this.userMarker=null,this.childrenObserver=null,this.entityChildren=new WeakMap,this.pathChildren=new WeakMap,this.popupTimer=null,this.showPopup=!1,this.lat=46.4983,this.long=11.3548,this.scale=13}componentDidLoad(){this.map=new f.Map(this.el,{zoomControl:!1}),this.entityFactory=new ut(this.map),this.updateCenterAndZoom(),new f.TileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(this.map),this.renderChildren(),this.childrenObserver=new MutationObserver(t=>this.childrenObserverCallback(t)),this.childrenObserver.observe(this.el,{attributes:!1,childList:!0,subtree:!1})}disconnectedCallback(){this.childrenObserver.disconnect()}latHandler(t,e){gt(t)||this.updateCenterAndZoom()}longHandler(t,e){gt(t)||this.updateCenterAndZoom()}scaleHandler(t,e){this.scale=t,this.updateCenterAndZoom()}entityAttrsObserver(t,e){for(const i of e)if("attributes"===i.type&&(["lat","long"].includes(i.attributeName)&&this.entityChildren.get(t).layer.setLatLng([t.getAttribute("lat"),t.getAttribute("long")]),["class"].includes(i.attributeName))){const e=this.entityChildren.get(t).layer,i=(t.getAttribute("class")+"").split(" ");(e.getElement().classList.value+"").split(" ").filter(t=>!t.startsWith("leaflet-")).forEach(t=>{e.getElement().classList.remove(t)}),i.forEach(t=>{e.getElement().classList.add(t)})}}childrenObserverCallback(t){for(const e of t)"childList"===e.type&&(this.removeChildren(e.removedNodes),this.renderChildren())}removeChildren(t){t.forEach(t=>{if(!t.nodeName.startsWith("NOI-"))return;const e=this.entityChildren.get(t);if(e)return this.map.removeLayer(e.layer),e.observer&&e.observer.disconnect(),void this.entityChildren.delete(t);const i=this.pathChildren.get(t);return i?(this.map.removeLayer(i.layer),i.observer&&i.observer.disconnect(),void this.pathChildren.delete(t)):void 0})}renderMapEntity(t){const e=this.entityFactory.createLayer(t),i=new MutationObserver(e=>this.entityAttrsObserver(t,e));i.observe(t,{attributes:!0,childList:!1,subtree:!1}),this.entityChildren.set(t,{layer:e,observer:i}),e.addTo(this.map),e.canSelect&&(e.bindPopup(this.popupElement,{minWidth:400}),e.getPopup().on("remove",()=>Z.selectedId=""))}renderGeoJson(t){const e=JSON.parse(t.getAttribute("geometry")),i=t.getAttribute("jam"),n=new f.GeoJSON(e,{style:{className:"noi-map-path"+(i?" noi-map-path--jam-"+i:" noi-map-path--jam-none")}});n.setZIndex(1),this.pathChildren.set(t,{layer:n,observer:null}),n.addTo(this.map)}renderChildren(){Array.from(this.el.children).map(t=>{if(void 0===this.entityChildren.get(t)&&void 0===this.pathChildren.get(t))switch(t.nodeName){case"NOI-MAP-ENTITY":this.renderMapEntity(t);break;case"NOI-MAP-ROUTE":this.renderGeoJson(t)}})}updateCenterAndZoom(){gt(this.lat)||gt(this.long)||this.map.setView([this.lat,this.long],this.scale)}onSetAsStart(){Z.startId=Z.selectedId,Z.selectedId="",this.map.closePopup()}onSetAsEnd(){Z.endId=Z.selectedId,Z.selectedId="",this.map.closePopup()}renderSetAsStartButton(){return Z.selectedId===Z.startId?null:i("noi-button",{fill:"solid",class:"button-md station-popup__btn",onClick:this.onSetAsStart.bind(this)},u("map-popup.from"))}renderSetAsEndButton(){return Z.selectedId===Z.endId?null:i("noi-button",{fill:"solid",class:"button-md station-popup__btn",onClick:this.onSetAsEnd.bind(this)},u("map-popup.to"))}renderSelectedStationPopup(){return i("div",{class:"station-popup"},i("div",{class:"station-popup__header"},Z.selectedId?Z.selected.name:""),i("div",{class:"station-popup__content"},this.renderSetAsStartButton(),this.renderSetAsEndButton()))}render(){return i("div",{class:{"popup-container":!0,"popup-container--visible":Z.mapPopup},ref:t=>this.popupElement=t},this.renderSelectedStationPopup())}get el(){return o(this)}static get watchers(){return{lat:["latHandler"],long:["longHandler"],scale:["scaleHandler"]}}};mt.style=':host{height:100%;width:100%;overflow:hidden;position:relative}.popup-container{min-width:200px;padding:8px;opacity:0;height:auto;-webkit-transition:all 0.5s;transition:all 0.5s}.popup-container--visible{opacity:1;-webkit-transition:all 0.5s;transition:all 0.5s}.station-popup{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:8px}.station-popup__header{height:40px;line-height:40px;color:#346e97;font-size:large;width:100%;text-align:center;text-transform:uppercase}.station-popup__content{display:flex;flex-direction:row;width:100%;padding:0 8px}.station-popup__btn{--background:var(--noi-action);--color:var(--noi-action-contrast);flex:1}.noi-map-path{stroke:var(--noi-primary);stroke-dasharray:6px;stroke-width:5px;cursor:default !important}.noi-map-path--jam-none{stroke:var(--noi-jam-none, blue)}.noi-map-path--jam-light{stroke:var(--noi-jam-light, yellow)}.noi-map-path--jam-strong{stroke:var(--noi-jam-strong, red)}.noi-marker{position:absolute;opacity:1.0;fill-opacity:1}.noi-marker>svg{position:absolute;top:0;left:0}.noi-marker:before{content:\'\';position:relative;display:block;width:300%;padding-top:300%;box-sizing:border-box;margin-left:-100%;margin-top:-100%;border-radius:50%;animation:pulse-ring 1.25s cubic-bezier(0.215, 0.61, 0.355, 1) infinite}@keyframes pulse-ring{0%{transform:scale(.63)}80%,100%{opacity:0}}.noi-marker--start{fill:var(--noi-primary)}.noi-marker--start:before{background-color:rgba(var(--noi-primary-rgb), 0.8)}.noi-marker--end{fill:var(--noi-action)}.noi-marker--end:before{background-color:rgba(var(--noi-action-rgb), 0.8)}.noi-highway-station{stroke-width:4;stroke:var(--noi-primary);fill:var(--noi-primary-contrast);opacity:1.0;fill-opacity:1}.noi-highway-station--hover{stroke:var(--noi-action)}.noi-highway-station--selected{stroke:#fff;fill:var(--noi-primary)}.noi-highway-station--start{stroke-width:4;stroke:var(--noi-primary);fill:var(--noi-primary-contrast)}.noi-highway-station--end{stroke-width:4;stroke:var(--noi-action);fill:var(--noi-action-contrast)}.noi-urban-station{stroke-width:2;stroke:var(--noi-action);fill:var(--noi-action-contrast);opacity:1.0;fill-opacity:1}.noi-urban-station--hover{stroke:var(--noi-primary)}.noi-urban-station--selected{stroke:#fff;fill:var(--noi-action)}.leaflet-tile-pane{-webkit-filter:grayscale(100%);filter:grayscale(100%)}.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg,.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none !important;max-height:none !important}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51, 181, 229, 0.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-tile{will-change:opacity}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity 0.5s linear;-moz-transition:opacity 0.5s linear;transition:opacity 0.5s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.leaflet-zoom-anim .leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform 0.25s cubic-bezier(0,0,0.25,1);-moz-transition:-moz-transform 0.25s cubic-bezier(0,0,0.25,1);transition:transform 0.25s cubic-bezier(0,0,0.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline:0}.leaflet-container a{color:#0078A8}.leaflet-container a.leaflet-active{outline:2px solid orange}.leaflet-zoom-box{border:2px dotted #38f;background:rgba(255,255,255,0.5)}.leaflet-container{font:12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif}.leaflet-bar{box-shadow:0 1px 5px rgba(0,0,0,0.65);border-radius:4px}.leaflet-bar a,.leaflet-bar a:hover{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:black}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:bold 18px \'Lucida Console\', Monaco, monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px rgba(0,0,0,0.4);background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(images/layers.png);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(images/layers-2x.png);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(images/marker-icon.png)}.leaflet-container .leaflet-control-attribution{background:#fff;background:rgba(255, 255, 255, 0.7);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover{text-decoration:underline}.leaflet-container .leaflet-control-attribution,.leaflet-container .leaflet-control-scale{font-size:11px}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;font-size:11px;white-space:nowrap;overflow:hidden;-moz-box-sizing:border-box;box-sizing:border-box;background:#fff;background:rgba(255, 255, 255, 0.5)}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,0.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:40px}.leaflet-popup-content-wrapper{padding:1px;text-align:left}.leaflet-popup-content{margin:0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:white;color:#333;box-shadow:0 3px 14px rgba(0,0,0,0.4)}.leaflet-container a.leaflet-popup-close-button{display:none}.leaflet-popup-scrolled{overflow:auto;border-bottom:1px solid #ddd;border-top:1px solid #ddd}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)}.leaflet-oldie .leaflet-popup-tip-container{margin-top:-1px}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px rgba(0,0,0,0.4)}.leaflet-tooltip.leaflet-clickable{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}';var bt=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some((function(t,n){return t[0]===e&&(i=n,!0)})),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),n=this.__entries__[i];return n&&n[1]},e.prototype.set=function(e,i){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,n=t(i,e);~n&&i.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var o=n[i];t.call(e,o[1],o[0])}},e}()}(),vt="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,wt="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),yt="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(wt):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},xt=["top","right","bottom","left","width","height","size","weight"],kt="undefined"!=typeof MutationObserver,_t=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t){var e=!1,i=!1,n=0;function o(){e&&(e=!1,t()),i&&r()}function a(){yt(o)}function r(){var t=Date.now();if(e){if(t-n<2)return;i=!0}else e=!0,i=!1,setTimeout(a,20);n=t}return r}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){vt&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),kt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){vt&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;xt.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),zt=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},Mt=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||wt},St=At(0,0,0,0);function Ct(t){return parseFloat(t)||0}function Tt(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce((function(e,i){return e+Ct(t["border-"+i+"-width"])}),0)}var jt="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof Mt(t).SVGGraphicsElement}:function(t){return t instanceof Mt(t).SVGElement&&"function"==typeof t.getBBox};function Ot(t){return vt?jt(t)?function(t){var e=t.getBBox();return At(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return St;var n=Mt(t).getComputedStyle(t),o=function(t){for(var e={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var o=n[i];e[o]=Ct(t["padding-"+o])}return e}(n),a=o.left+o.right,r=o.top+o.bottom,s=Ct(n.width),l=Ct(n.height);if("border-box"===n.boxSizing&&(Math.round(s+a)!==e&&(s-=Tt(n,"left","right")+a),Math.round(l+r)!==i&&(l-=Tt(n,"top","bottom")+r)),!function(t){return t===Mt(t).document.documentElement}(t)){var c=Math.round(s+a)-e,d=Math.round(l+r)-i;1!==Math.abs(c)&&(s-=c),1!==Math.abs(d)&&(l-=d)}return At(o.left,o.top,s,l)}(t):St}function At(t,e,i,n){return{x:t,y:e,width:i,height:n}}var Et=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=At(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=Ot(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),Dt=function(t,e){var i,n,o,a,r,s,l,c=(n=(i=e).x,o=i.y,a=i.width,r=i.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),zt(l,{x:n,y:o,width:a,height:r,top:o,right:n+a,bottom:r+o,left:n}),l);zt(this,{target:t,contentRect:c})},It=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new bt,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Mt(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Et(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Mt(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new Dt(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),$t="undefined"!=typeof WeakMap?new WeakMap:new bt,Lt=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=_t.getInstance(),n=new It(e,i,this);$t.set(this,n)};["observe","unobserve","disconnect"].forEach((function(t){Lt.prototype[t]=function(){var e;return(e=$t.get(this))[t].apply(e,arguments)}}));var Nt=void 0!==wt.ResizeObserver?wt.ResizeObserver:Lt;const Ht=()=>{let t,e,i,n=10*-Ft,o=0;const a=new WeakMap,r=t=>{n=y(t),c()},s=()=>{clearTimeout(i),i=void 0,e&&(p(!1),e=void 0)},l=i=>{e||void 0!==t&&null!==t.parentElement||(t=void 0,d(Pt(i)))},c=()=>{d(void 0)},d=t=>{if(!t||t!==e){if(clearTimeout(i),i=void 0,e){if(a.has(e))throw new Error("internal error");e.classList.contains(Yt)||h(e),p(!0)}if(t){const e=a.get(t);e&&(clearTimeout(e),a.delete(t));const n=Bt(t)?0:Rt;t.classList.remove(Yt),i=setTimeout(()=>{h(t),i=void 0},n)}e=t}},h=t=>{o=Date.now(),t.classList.add(Yt)},p=t=>{const i=e;if(!i)return;const n=qt-Date.now()+o;if(t&&n>0&&!Bt(i)){const t=setTimeout(()=>{i.classList.remove(Yt),a.delete(i)},qt);a.set(i,t)}else i.classList.remove(Yt)},f=document;f.addEventListener("noiScrollStart",e=>{t=e.target,s()}),f.addEventListener("noiScrollEnd",()=>{t=void 0}),f.addEventListener("noiGestureCaptured",s),f.addEventListener("touchstart",t=>{n=y(t),l(t)},!0),f.addEventListener("touchcancel",r,!0),f.addEventListener("touchend",r,!0),f.addEventListener("mousedown",t=>{const e=y(t)-Ft;n<e&&l(t)},!0),f.addEventListener("mouseup",t=>{const e=y(t)-Ft;n<e&&c()},!0)},Pt=t=>{if(!t.composedPath)return t.target.closest(".noi-activatable");{const e=t.composedPath();for(let t=0;t<e.length-2;t++){const i=e[t];if(i.classList&&i.classList.contains("noi-activatable"))return i}}},Bt=t=>t.classList.contains("noi-activatable-instant"),Yt="noi-activated",Rt=200,qt=200,Ft=2500,Vt=class{constructor(e){t(this,e),this.showSearch=!0,this.errorCode=void 0,this.loading=!0}async loadLocaleAndStations(){this.errorCode=void 0,this.loading=!0;try{await g(this.element);const t=await N.getHighwayStations();Z.stations=t.reduce((t,e)=>(t[e.id]=e,t),{}),this.loading=!1}catch(t){this.errorCode=t instanceof c?t.code:p,this.loading=!1}}async componentDidLoad(){var t;await this.loadLocaleAndStations(),t=Ht,"requestIdleCallback"in window?window.requestIdleCallback(t):setTimeout(t,32),this.resizeObserver=new Nt(m(100,([t])=>{this.applyMediaClasses(t.contentRect.width,t.contentRect.height)})),this.resizeObserver.observe(this.element)}disconnectedCallback(){this.resizeObserver.disconnect()}applyMediaClasses(t,e){const i=t>600,n=i&&t>e;this.element.classList.toggle("noi-media-gs",i),this.element.classList.toggle("noi-media-gs--landscape",n),this.stationsModalEl&&(this.stationsModalEl.classList.toggle("noi-media-gs",i),this.stationsModalEl.classList.toggle("noi-media-gs--landscape",n)),this.searchEl&&(this.searchEl.classList.toggle("noi-media-gs",i),this.searchEl.classList.toggle("noi-media-gs--landscape",n))}getHighwayCircles(){return Z.stations?et().map(t=>i(dt,Object.assign({},t))):null}getPathCircles(){return Z.stations?et().map(t=>i(dt,Object.assign({},t))):null}getPath(){return"highway"===Z.activePath?V.path?V.path.map(t=>i("noi-map-route",{key:`${t.id}-${t.jamLevel}`,jam:t.jamLevel,geometry:JSON.stringify(t.geometry)})):null:"urban"===Z.activePath?K.loading||K.errorCode||!K.path?null:K.path.map(t=>i("noi-map-route",{key:`${t.id}-${t.jamLevel}`,jam:t.jamLevel,geometry:JSON.stringify(t.geometry)})):null}getHighwayMarkers(){return Z.startId||Z.endId?(Z.stations?Z.stationsList.filter(t=>t.id===Z.startId||t.id===Z.endId).map(t=>Object.assign(Object.assign({},t),{selected:t.id===Z.selectedId,isStart:t.id===Z.startId,isEnd:t.id===Z.endId})):null).map(t=>i(st,Object.assign({},t))):null}getUrbanCircles(){return"urban"!==Z.activePath||K.loading||K.errorCode||!K.path?null:K.stations.map(t=>i(ft,Object.assign({},t,{selected:t.id===K.selectedId})))}getAllLinkStations(t){return t.map(t=>i("leaflet-geojson",{geometry:JSON.stringify(t.geometry)}))}onModalClose(){Z.selecting=null}renderError(){return i("div",{class:"wrapper"},i("div",{class:"error"},i("h2",null,u(this.errorCode)),i("noi-button",{fill:"solid",class:"button-md error-btn",onClick:this.loadLocaleAndStations.bind(this)},"Retry")))}getMapCenter(){if("urban"===Z.activePath&&K.stations&&K.selectedId){const t=K.stations.find(t=>t.id===K.selectedId);if(t)return t.coordinates}return Z.mapCenter}render(){if(this.loading)return i("div",{class:"wrapper"},i("div",{class:"loading"},i("div",{class:"loading-img"},i("img",{src:s("./search.svg"),alt:""}))));if(this.errorCode)return this.renderError();const t=this.getMapCenter();return i("div",{class:"wrapper"},i("noi-backdrop",{overlayIndex:2,visible:!!Z.selecting,onNoiBackdropTap:this.onModalClose.bind(this)}),i("noi-stations-modal",{ref:t=>this.stationsModalEl=t,selecting:Z.selecting,onModalClose:this.onModalClose.bind(this),overlayIndex:2,visible:!!Z.selecting}),i("noi-search",{ref:t=>this.searchEl=t}),i("noi-map",{lat:t.lat,long:t.long},this.getHighwayCircles(),this.getUrbanCircles(),this.getHighwayMarkers(),this.getPath()))}get element(){return o(this)}};Vt.style='.sc-noi-mobility-traffic-h{display:block;overflow:hidden;width:var(--noi-width, 100%);height:var(--noi-height, 100%);--noi-font-family-default:"Roboto", "Helvetica Neue", sans-serif}.wrapper.sc-noi-mobility-traffic{position:relative;display:flex;flex-direction:row;height:100%;margin:0}.error.sc-noi-mobility-traffic{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:var(--noi-font-family, var(--noi-font-family-default));background:var(--noi-primary-contrast);color:rgba(var(--noi-primary-rgb), 0.8)}.loading.sc-noi-mobility-traffic{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--noi-primary-contrast);color:rgba(var(--noi-primary-rgb), 0.8)}.loading-img.sc-noi-mobility-traffic{position:relative;width:300px;height:300px;border-radius:50%;overflow:hidden;box-shadow:0 2px 5px rgba(0, 0, 0, 0.4)}.loading-img.sc-noi-mobility-traffic>img.sc-noi-mobility-traffic{position:absolute;width:100%;left:0}.loading-img.sc-noi-mobility-traffic:before{z-index:1;background:rgba(var(--noi-primary-rgb), 0.5);content:\'\';position:absolute;left:0;width:100%;padding-top:100%;border-radius:50%;animation:pulse-circle 1.5s cubic-bezier(0.215, 0.61, 0.355, 1) infinite}@keyframes pulse-circle{0%{transform:scale(.5)}80%,100%{opacity:0}}.error-btn.sc-noi-mobility-traffic{--font-family:var(--noi-font-family, var(--noi-font-family-default));--background:var(--noi-primary);--color:var(--noi-primary-contrast)}noi-map.sc-noi-mobility-traffic{z-index:0;flex:1}',b();const Gt=class{constructor(i){t(this,i),this.toggleActive=e(this,"toggleActive",7),this.activePath="highway"}onActivatePath(t){this.toggleActive.emit(t),this.activePath=t}renderHighwayPathError(){return V.pathError?i("div",{class:"container"},i("p",{class:"error"},u(V.pathError))):null}renderHighwayDetails(){return V.errorCode?i("div",{class:"container"},i("p",{class:"error"},u(V.errorCode))):[i("noi-last-sync",{syncDate:V.syncDate}),this.renderHighwayPathError()]}renderPath(){if("urban"===this.activePath)return i("noi-urban-path",null);const t=it();if(!t||!t.length)return null;const e=t[0].position,n=V.segmentsTime||{};return i("div",{class:"content"},i("div",{class:{content__inner:!0,"content__inner--error":!!V.pathError&&!!V.syncDate}},this.renderHighwayDetails(),t.map((o,a)=>i("noi-station-item",{name:o.name,position:Math.abs(e-o.position),timeSec:0===a?void 0:Math.round(n[`${t[a-1].id}-${o.id}`]),isStart:!!o.isStart,isEnd:!!o.isEnd}))))}renderUrbanHeaderTab(){const t={header__section:!0,"header__section--active":"urban"===this.activePath,"header__section--err":!!K.errorCode};return void 0!==K.durationMin?i("noi-button",{class:t,onClick:this.onActivatePath.bind(this,"urban")},i("span",{class:"header-highway__title"},u("path-details.urban-name"))," ",v(K.durationMin)):K.errorCode?i("noi-button",{class:t,onClick:this.onActivatePath.bind(this,"urban")},i("span",{class:"header-highway__title"},u("path-details.urban-name")),u("path-details.urban-error")):K.loading?i("noi-button",{disabled:!0,class:t},i("span",{class:"header-highway__title"},u("path-details.urban-name")),u("path-details.urban-loading")):i("noi-button",{disabled:!0,class:t},i("span",{class:"header-highway__title"},u("path-details.urban-name")))}renderA22HeaderTab(){const t={header__section:!0,"header__section--active":"highway"===this.activePath,"header__section--err":!!V.errorCode};return void 0!==V.durationMin?i("noi-button",{class:t,onClick:this.onActivatePath.bind(this,"highway")},i("p",null,i("span",{class:"header-highway__title"},u("path-details.highway-name"))," ",v(V.durationMin))):V.errorCode?i("noi-button",{class:t,onClick:this.onActivatePath.bind(this,"highway")},i("span",{class:"header-highway__title"},u("path-details.highway-name")),i("span",{class:"header-highway__icon"},"⚠")):V.loading?i("noi-button",{disabled:!0,class:t},i("span",{class:"header-highway__title"},u("path-details.highway-name")),u("path-details.highway-loading")):i("noi-button",{disabled:!0,class:t},i("span",{class:"header-highway__title"},u("path-details.highway-name")))}render(){return i(n,{class:{}},i("header",null,this.renderA22HeaderTab(),this.renderUrbanHeaderTab()),this.renderPath())}};Gt.style=".sc-noi-path-details-h{display:flex;flex-direction:column}header.sc-noi-path-details{display:flex;width:100%;height:48px;line-height:48px;margin-bottom:auto;text-align:center}.container.sc-noi-path-details{height:48px;line-height:48px;display:flex;justify-content:center;align-items:center;font-family:var(--noi-font-family, var(--noi-font-family-default))}.error.sc-noi-path-details{padding:4px;margin:8px 8px 16px 8px;text-align:center;border-radius:4px;background:rgba(var(--noi-error-rgb, 255, 0, 0), 0.7);color:var(--noi-error-contrast, #fff);line-height:normal;font-weight:normal}noi-button.header__section.sc-noi-path-details{flex:1;max-width:50%;justify-content:center;--background:rgba(var(--noi-primary-rgb), 0.3);--color:var(--noi-primary-contrast);font-weight:bold;text-shadow:1px 1px rgb(0,0,0,0.3)}noi-button.header__section--active.sc-noi-path-details{--background:rgba(var(--noi-primary-rgb), 0.7)}noi-button.header__section--err.sc-noi-path-details{--background:rgba(var(--noi-error-rgb, 255, 0, 0), 0.3);--color:var(--noi-error-contrast, #fff)}noi-button.header__section--active.header__section--err.sc-noi-path-details{--background:rgba(var(--noi-error-rgb, 255, 0, 0), 0.7)}.content.sc-noi-path-details{flex:1;overflow-y:auto;overflow-x:hidden}.content__inner.sc-noi-path-details{position:relative}.content__inner.sc-noi-path-details::before{position:absolute;content:'';z-index:2;top:88px;bottom:48px;left:38px;width:4px;background:repeating-linear-gradient(\n        0,\n        transparent,\n        transparent 16px,\n        #fff 16px,\n        #fff 32px\n      ),\n      linear-gradient(to bottom, var(--noi-primary), var(--noi-action))}.content__inner--error.sc-noi-path-details::before{top:calc(88px + 48px);background-position-y:-48px}.header-highway__title.sc-noi-path-details{background:var(--noi-primary-contrast);color:var(--noi-primary);border-radius:4px;padding:4px;margin-right:8px;font-weight:normal;text-shadow:none}.header-highway__icon.sc-noi-path-details{font-size:28px;font-weight:bold;font-family:var(--noi-font-family, var(--noi-font-family-default))}noi-station-item.sc-noi-path-details:last-of-type{margin-bottom:48px}noi-urban-path.sc-noi-path-details{height:100%;display:block}";const Ut=class{constructor(e){t(this,e),this.durationMin=0,this.hostClass={}}getStart(){return Z.start?Z.start.name:u("search.start-placeholder")}getEnd(){return Z.end?Z.end.name:u("search.end-placeholder")}onInputClick(t){Z.selecting=t}onReorderClick(){const t=Z.startId,e=Z.endId;t&&(Z.endId=t),e&&(Z.startId=e)}onToggleActive(t){if(!this.hostClass.slideIn)return Z.activePath=t.detail,void(this.hostClass={slideIn:!0});const e=Z.activePath===t.detail;Z.activePath=t.detail,e&&this.hostClass.slideIn&&(this.hostClass={slideOut:!0})}onSlideOut(){this.hostClass={slideOut:!0}}renderDetails(){return ot()?i("noi-path-details",{onToggleActive:this.onToggleActive.bind(this)}):null}renderFooter(){return ot()?i("img",{class:"search-footer__img",src:s("./mountains.svg"),alt:""}):[i("p",{class:"search-footer__text"},"Smart travel ",i("br",null)," decisions"),i("img",{class:"search-footer__img",src:s("./search.svg"),alt:""})]}render(){const t={"search-station-btn":!0,"search-station-btn--empty":!Z.startId,"search-station-btn--start":!0},e={"search-station-btn":!0,"search-station-btn--empty":!Z.endId,"search-station-btn--end":!0};return i(n,{class:{"slide-in":this.hostClass.slideIn,"slide-out":this.hostClass.slideOut}},i("div",{class:"content"},i("header",null,i("noi-button",{class:"header__back-btn",fill:"clear",onClick:this.onSlideOut.bind(this)},i("svg",{slot:"icon-only",class:"header__icon",height:"14",viewBox:"0 0 10 14",width:"10",xmlns:"http://www.w3.org/2000/svg"},i("path",{d:"m0 1.53073535 1.28718658-1.53073535 8.35973178 7.02965056-8.35973178 7.02965054-1.28718658-1.5307353 6.53859329-5.49919813z",transform:"matrix(-1 0 0 1 9.646918 0)"}))),i("img",{class:"search__logo",src:s("./logo.svg"),alt:"BrennerLec"})),i("div",{class:"search__stations"},i("div",{class:"search-stations__wrapper"},i("div",{class:"search-stations__buttons"},i("noi-button",{class:t,onClick:this.onInputClick.bind(this,"start")},i("svg",{slot:"start",class:"btn-marker-icon",height:"20",viewBox:"0 0 14 20",width:"14",xmlns:"http://www.w3.org/2000/svg"},i("path",{d:"m7 0c3.8659932 0 7 3.13400675 7 7 0 2.57732883-2.3333333 6.9106622-7 13l-.60839506-.8015058c-4.26106996-5.6695486-6.39160494-9.73571332-6.39160494-12.1984942 0-3.86599325 3.13400675-7 7-7z","stroke-width":"2"})),this.getStart()),i("noi-button",{class:e,onClick:this.onInputClick.bind(this,"end")},i("svg",{slot:"start",height:"20",class:"btn-marker-icon",viewBox:"0 0 14 20",width:"14",xmlns:"http://www.w3.org/2000/svg"},i("path",{d:"m7 0c3.8659932 0 7 3.13400675 7 7 0 2.57732883-2.3333333 6.9106622-7 13l-.60839506-.8015058c-4.26106996-5.6695486-6.39160494-9.73571332-6.39160494-12.1984942 0-3.86599325 3.13400675-7 7-7z","stroke-width":"2"})),this.getEnd())),i("noi-button",{class:"search-reorder-btn",onClick:this.onReorderClick.bind(this)},i("svg",{slot:"icon-only",class:"search-reorder-btn__icon",height:"23",viewBox:"0 0 20 23",width:"20",xmlns:"http://www.w3.org/2000/svg"},i("path",{d:"m16.3379295 9 5.8258823 5.2432941-5.8258823 5.2432942-1.3379295-1.4865883 2.9659059-2.67-15.38399998.000353v-2l15.57799998-.000353-3.1599059-2.8434117zm-10.51204712-9 1.33792947 1.48658829-3.16081185 2.84341171 15.5789059.00035295v2l-15.3849059-.00035295 2.96681185 2.67-1.33792947 1.4865883-5.82588238-5.24329415z",transform:"matrix(0 1 -1 0 20 0)"}))))),this.renderDetails(),i("footer",null,this.renderFooter())))}};Ut.style=".sc-noi-search-h{--height:210px;position:absolute;background:#fff;width:100%;top:0;bottom:0;left:0;margin:0;padding:0;z-index:1;overflow:hidden;transform:translateY(calc(100% - var(--height)));-webkit-transform:translateY(calc(100% - var(--height)));will-change:transform}.sc-noi-search-h:not(.noi-media-gs).slide-in{animation:search-slide-in 0.5s forwards;-webkit-animation:search-slide-in 0.5s forwards}.sc-noi-search-h:not(.noi-media-gs).slide-out{animation:search-slide-out 0.5s forwards;-webkit-animation:search-slide-out 0.5s forwards}.noi-media-gs.sc-noi-search-h{position:initial;height:auto;height:100%;max-width:360px;transform:translateY(0);-webkit-transform:translateY(0)}.noi-media-gs--landscape.sc-noi-search-h{height:100%;width:360px}@keyframes search-slide-in{100%{transform:translateY(0);-webkit-transform:translateY(0)}}@-webkit-keyframes search-slide-in{100%{transform:translateY(0);-webkit-transform:translateY(0)}}@keyframes search-slide-out{0%{transform:translateY(0)}100%{transform:translateY(calc(100% - var(--height)))}}@-webkit-keyframes search-slide-out{0%{-webkit-transform:translateY(0%)}100%{-webkit-transform:translateY(calc(100% - var(--height)))}}header.sc-noi-search{display:flex;margin:16px 0 8px 0;min-height:36px}.header__icon.sc-noi-search{fill:var(--noi-primary)}.header__back-btn.sc-noi-search{margin-right:auto;min-width:48px;fill:var(--noi-primary)}.noi-media-gs.sc-noi-search-h .header__back-btn.sc-noi-search{visibility:hidden}.sc-noi-search-h:not(.slide-in) .header__back-btn.sc-noi-search{visibility:hidden}.content.sc-noi-search{display:flex;flex-direction:column;height:100%}.search__logo.sc-noi-search{flex:1;margin-right:16px}footer.sc-noi-search{margin-top:auto;display:none;height:0;z-index:999}.slide-in.sc-noi-search-h footer.sc-noi-search{display:block;height:auto}.noi-media-gs.sc-noi-search-h footer.sc-noi-search{display:block;height:auto}.search-footer__text.sc-noi-search{font-family:var(--noi-font-family, var(--noi-font-family-default));font-weight:bold;text-transform:uppercase;text-align:center;color:rgba(var(--noi-primary-rgb), 0.3);font-size:23px;margin-bottom:-16px}.search-footer__img.sc-noi-search{width:calc(100% + 2px);height:calc(100% + 4px)}.search__stations.sc-noi-search{width:100%;display:block;margin-bottom:auto}.search-stations__wrapper.sc-noi-search{display:flex;flex-direction:row;align-items:center}.search-stations__buttons.sc-noi-search{flex:1}.search-reorder-btn.sc-noi-search{margin-left:auto;margin-right:8px;--transition:box-shadow 200ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;--box-shadow:none;--padding-start:8px;--padding-end:8px;--background-activated:#eee;--background-activated-opacity:0.5}.search-reorder-btn__icon.sc-noi-search{fill:var(--noi-action)}.search-reorder-btn.noi-activated.sc-noi-search{--background:#eee;--box-shadow:0px 0px 0px 2px #eee}.search-station-btn.sc-noi-search{text-transform:uppercase;font-size:13px;font-weight:bold;--background:#eee;--color:var(--noi-primary);margin:8px;display:block;margin-right:12px;--transition:box-shadow 200ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;--box-shadow:none;--padding-top:12px;--padding-right:8px;--padding-bottom:12px;--padding-left:8px;--background-activated:#eee;--background-activated-opacity:0.5;--border-width:1px;--border-style:solid}.search-station-btn--empty.sc-noi-search{font-weight:normal;--color:rgba(var(--noi-primary-rgb), 0.5)}.search-station-btn--start.sc-noi-search{--border-color:rgba(var(--noi-primary-rgb), 0.5)}.search-station-btn--end.sc-noi-search{--border-color:rgba(var(--noi-action-rgb), 0.5)}.search-station-btn--start.sc-noi-search>svg.sc-noi-search{fill:var(--noi-primary)}.search-station-btn--end.sc-noi-search>svg.sc-noi-search{fill:var(--noi-action)}noi-path-details.sc-noi-search{flex:1;overflow:hidden;width:100%;margin-bottom:-48px}";const Wt=class{constructor(e){t(this,e),this.isStart=!1,this.isSelected=!1,this.isEnd=!1}renderDetails(){let t="";return this.position?(t+=(this.position/1e3).toFixed(1)+" km",this.timeSec&&(t+=` - ${Math.round(this.timeSec/60)} min`),i("p",null,t)):null}render(){return i(n,{class:{"station-item--end":this.isEnd,"station-item--start":this.isStart,"station-item--selected":this.isSelected}},i("svg",{height:"20",viewBox:"-4 0 20 24",width:"14",xmlns:"http://www.w3.org/2000/svg"},i("path",{d:"m7 0c3.8659932 0 7 3.13400675 7 7 0 2.57732883-2.3333333 6.9106622-7 13l-.60839506-.8015058c-4.26106996-5.6695486-6.39160494-9.73571332-6.39160494-12.1984942 0-3.86599325 3.13400675-7 7-7z"})),i("div",{class:"container"},i("h3",null,this.name),this.renderDetails(),this.isStart?i("p",null,"(",u("station-item.start"),")"):null))}};Wt.style=".sc-noi-station-item-h{overflow:hidden;position:relative;margin:0 16px 0 48px;background:transparent;font-family:var(--noi-font-family, var(--noi-font-family-default));color:rgba(var(--noi-primary-rgb), 0.7);display:flex;flex-direction:row;align-items:center;cursor:pointer}.station-item--start.sc-noi-station-item-h{margin-left:16px}.station-item--end.sc-noi-station-item-h{margin-left:16px}.station-item--selected.sc-noi-station-item-h{background:rgba(var(--noi-primary-rgb), 0.5);color:var(--noi-primary-contrast);border-radius:4px}.container.sc-noi-station-item{flex:1;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:8px;margin-bottom:8px}h3.sc-noi-station-item{font-family:var(--noi-font-family, var(--noi-font-family-default));margin:0;padding:0}p.sc-noi-station-item{font-size:12px;text-transform:uppercase;margin:0;padding:0}.station-item--start.sc-noi-station-item-h:not(.station-item--selected) h3.sc-noi-station-item{color:var(--noi-primary)}.station-item--end.sc-noi-station-item-h:not(.station-item--selected) h3.sc-noi-station-item{color:var(--noi-action)}svg.sc-noi-station-item{margin:0 16px;fill:var(--noi-primary-contrast);stroke-width:4px;stroke:rgba(var(--noi-primary-rgb), 0.7)}.station-item--start.sc-noi-station-item-h svg.sc-noi-station-item{stroke:var(--noi-primary);fill:var(--noi-primary)}.station-item--end.sc-noi-station-item-h svg.sc-noi-station-item{stroke:var(--noi-action);fill:var(--noi-action)}";const Xt=class{constructor(i){t(this,i),this.modalClose=e(this,"modalClose",7),this.visible=!1,this.selecting="start",this.overlayIndex=1,this.searchText="",this.hostClass={}}onVisibleChange(t){this.hostClass=this.getHostClass(t)}onClose(){this.modalClose.emit(),this.searchText=""}getTitle(){return u("stations-modal.header-"+this.selecting)}onSearchChange(t){this.searchText=t?t.detail.value.toLowerCase():""}stationSelectedToggle(t){Z.selectedId=t}onSelectStation(t){"start"===this.selecting&&(Z.startId=t),"end"===this.selecting&&(Z.endId=t)}renderStations(){if(!Z.stationsList)return null;const t="start"===this.selecting?Z.endId:Z.startId;return(Z.stations?Z.stationsList.map(t=>Object.assign(Object.assign({},t),{selected:t.id===Z.selectedId})):null).filter(e=>e.name.toLowerCase().includes(this.searchText)&&e.id!==t).map(t=>i("article",{class:{station:!0,"station--selected":t.selected,"station--end":"end"===this.selecting},onClick:this.stationSelectedToggle.bind(this,t.id)},i("svg",{class:"station__icon",height:"20",viewBox:"-4 -4 20 24",width:"14",xmlns:"http://www.w3.org/2000/svg"},i("path",{d:"m7 0c3.8659932 0 7 3.13400675 7 7 0 2.57732883-2.3333333 6.9106622-7 13l-.60839506-.8015058c-4.26106996-5.6695486-6.39160494-9.73571332-6.39160494-12.1984942 0-3.86599325 3.13400675-7 7-7z","stroke-width":"2"})),t.name,i("noi-button",{size:"small",class:"station__select-btn button-md",onClick:this.onSelectStation.bind(this,t.id)},u("stations-modal.select-btn"))))}getHostClass(t){return t?{slideIn:!0}:!t&&this.hostClass.slideIn?{slideOut:!0}:{}}render(){return i(n,{class:{"slide-in":this.hostClass.slideIn,"slide-out":this.hostClass.slideOut},style:{zIndex:""+(this.overlayIndex+1)}},i("div",{class:"wrapper"},i("header",null,i("noi-button",{fill:"clear",onClick:this.onClose.bind(this)},i("svg",{slot:"icon-only",class:"header__icon",height:"14",viewBox:"0 0 10 14",width:"10",xmlns:"http://www.w3.org/2000/svg"},i("path",{d:"m0 1.53073535 1.28718658-1.53073535 8.35973178 7.02965056-8.35973178 7.02965054-1.28718658-1.5307353 6.53859329-5.49919813z",transform:"matrix(-1 0 0 1 9.646918 0)"}))),i("span",{class:"header__title"},this.getTitle())),i("div",{class:"search"},i("noi-input",{debounce:100,onNoiChange:this.onSearchChange.bind(this),placeholder:u("stations-modal.input-placeholder")})),i("div",{class:"list"},this.renderStations())))}static get watchers(){return{visible:["onVisibleChange"]}}};Xt.style=".sc-noi-stations-modal-h{position:absolute;display:block;top:0;bottom:0;left:0;width:100%;background:var(--background, #fff);transform:translateX(-100%);-webkit-transform:translateX(-100%);will-change:transform}.noi-media-gs.sc-noi-stations-modal-h{width:100%;max-width:360px}.noi-media-gs--landscape.sc-noi-stations-modal-h{width:360px}.slide-in.sc-noi-stations-modal-h{animation:slide-in 0.4s forwards;-webkit-animation:slide-in 0.4s forwards}.slide-out.sc-noi-stations-modal-h{animation:slide-out 0.3s forwards;-webkit-animation:slide-out 0.3s forwards}@keyframes slide-in{100%{transform:translateX(0%)}}@-webkit-keyframes slide-in{100%{transform:translateX(0%)}}@keyframes slide-out{0%{transform:translateX(0%)}100%{transform:translateX(-100%)}}@-webkit-keyframes slide-out{0%{-webkit-transform:translateX(0%)}100%{-webkit-transform:translateX(-100%)}}.wrapper.sc-noi-stations-modal{height:100%;width:100%;display:flex;flex-direction:column}header.sc-noi-stations-modal{background:var(--noi-primary);min-height:48px;display:flex;align-items:center;padding:0 16px}.header__icon.sc-noi-stations-modal{margin-left:auto;fill:var(--noi-primary-contrast)}.header__title.sc-noi-stations-modal{font-family:var(--noi-font-family, var(--noi-font-family-default));color:var(--noi-primary-contrast);font-size:16px;flex:1;text-align:center;text-transform:uppercase}.search.sc-noi-stations-modal{margin-bottom:auto}.list.sc-noi-stations-modal{flex:1;background:#ffffff;min-height:0;overflow:auto}.station.sc-noi-stations-modal{overflow:hidden;position:relative;height:48px;margin:0 16px;padding-right:8px;background:#ffffff;font-family:var(--noi-font-family, var(--noi-font-family-default));color:var(--noi-primary);display:flex;align-items:center}.station.sc-noi-stations-modal::before{content:' ';position:fixed;width:100%;height:100%;top:0;left:0;background-color:white;background-size:cover;will-change:transform;z-index:-1}.station--selected.sc-noi-stations-modal{background:rgba(var(--noi-primary-rgb), 0.8);color:var(--noi-primary-contrast)}.station--selected.sc-noi-stations-modal>.station__select-btn.sc-noi-stations-modal{display:block}.station__icon.sc-noi-stations-modal{margin:0 16px;fill:var(--noi-primary);stroke-width:2px;stroke:var(--noi-primary)}.station__select-btn.sc-noi-stations-modal{--background:var(--noi-action);--color:var(--noi-action-contrast);margin-left:auto;min-width:80px;display:none}.station--selected.sc-noi-stations-modal>.station__icon.sc-noi-stations-modal{fill:var(--noi-primary-contrast)}.station--end.sc-noi-stations-modal>.station__icon.sc-noi-stations-modal{fill:var(--noi-action);stroke:var(--noi-action)}.station--end.station--selected.sc-noi-stations-modal>.station__icon.sc-noi-stations-modal{fill:var(--noi-action-contrast)}noi-input.sc-noi-stations-modal{--background:#eee;--color:var(--noi-primary);margin:8px;width:auto}noi-input.has-value.sc-noi-stations-modal{--background:#ccc}";const Jt=class{constructor(e){t(this,e)}renderContent(){if(K.loading)return null;if(K.errorCode)return i("div",{class:"container"},i("p",{class:"error"},u(K.errorCode)));if(!K.stations||!K.stations.length)return i("div",{class:"container"},i("p",{class:"empty"},u("path-details.urban-empty")));const t=K.stations.map((t,e)=>i("noi-station-item",{name:u("link-station."+t.id),position:t.position,timeSec:t.timeSec,isStart:0===e,isSelected:K.selectedId===t.id,onClick:this.onStationClick.bind(this,t.id)}));return[i("noi-last-sync",{syncDate:K.syncDate}),t]}onStationClick(t){K.selectedId=t}render(){return i(n,{class:{}},i("div",{class:"content"},this.renderContent()))}};Jt.style=".content.sc-noi-urban-path{overflow-y:auto;overflow-x:hidden;height:100%;position:relative}.container.sc-noi-urban-path{height:100%;display:flex;justify-content:center;align-items:center;font-family:var(--noi-font-family, var(--noi-font-family-default))}.error.sc-noi-urban-path{padding:8px;margin-left:8px;margin-right:8px;text-align:center;border-radius:4px;background:rgba(var(--noi-error-rgb, 255, 0, 0), 0.7);color:var(--noi-error-contrast, #fff)}.empty.sc-noi-urban-path{padding:8px;margin-left:8px;margin-right:8px;text-align:center;border-radius:4px;background:rgba(var(--noi-primary-rgba, 0, 0, 255), 0.7);color:var(--noi-error-contrast, #fff)}noi-station-item.sc-noi-urban-path:last-of-type{margin-bottom:100px}";export{w as noi_backdrop,k as noi_button,_ as noi_input,mt as noi_map,Vt as noi_mobility_traffic,Gt as noi_path_details,Ut as noi_search,Wt as noi_station_item,Xt as noi_stations_modal,Jt as noi_urban_path}